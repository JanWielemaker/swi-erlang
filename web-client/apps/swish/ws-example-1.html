<html lang="en">
    <head>
		<script>
		    var ws = new WebSocket('ws://localhost:3060/ws', 'web_prolog'); 
			var id = Math.random().toString(36);
			function send(message) {
				ws.send(JSON.stringify(message));
			}
		    ws.onerror = function(message) {
		        document.getElementById("output").innerText += JSON.stringify(message) + "\n";
		    };
		    ws.onopen = function(message) {
				send({action:"pengine_spawn", options:'[reply_to("'+id+'")]'});
		    };
		    ws.onmessage = function(message) {
		        var event = JSON.parse(message.data);
		        if (event.type == "spawned") {
					send({action:"pengine_ask", pid:event.pid, goal:"member(X, [a,b,c])"});
		        } else if (event.type == "success") {
					document.getElementById("output").innerText += JSON.stringify(event.data) + "\n";
			        if (event.more) {
			            send({action:"pengine_next", pid:event.pid});
			        } 
		        } 
		    }; 
		</script>
    </head>
    <body>
		<div id="output"></div>
    </body>
</html>

      